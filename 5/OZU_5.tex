% !TeX encoding = UTF-8

\documentclass{protokol}

\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{arrows}

%====== Units =====
\usepackage{siunitx}
\sisetup{inter-unit-product =\ensuremath{\cdot}}
\sisetup{group-digits = integer}
\sisetup{output-decimal-marker = {,}}
\sisetup{exponent-product = \ensuremath{\cdot}}
\sisetup{separate-uncertainty}
\sisetup{tight-spacing = false}
%\sisetup{scientific-notation = true}
%\sisetup{round-mode=places,round-precision=4}
%\sisetup{evaluate-expression}


%====== Grafy =====
\usepackage{pgfplots}
\pgfplotsset{width=0.8\linewidth, compat=1.17}
\def\plotcscale{0.8}
\usepackage{pgfplotstable}
\usepackage[figurename=Graf]{caption} % figure caption rename
%====== Rovnice align block ======
\usepackage{amsmath}
\setlength{\jot}{10pt} % rozestup mezi řádky

\graphicspath{ {./img/} }

%====== Vyplňte údaje ======
\jmeno{Jakub Charvot}
\kod{240844}
\rocnik{2.}
\obor{MET}
\skupina{MET/4}
\spolupracoval{Radek Kučera}

\merenodne{10.\,11.\,2022}
\odevzdanodne{24.\,11.\,2022}
\nazev{Operační usměrňovače}
\cislo{4} %měřené úlohy

\predmet{Analogové elektronické obvody}
\ustav{Ústav mikroelektroniky}
\skola{FEKT VUT v Brně}

\def\para{x+0}
\def\parb{\para-80}

% CSV
\usepackage{blindtext}

\usepackage{subfiles} % Best loaded last in the preamble
\usepackage{datatool}

% \DTLloaddb[omitlines=1]{data}{data/data-voda.csv}
% \DTLloaddb[omitlines=2]{druha}{data/druha-cast.csv}



\begin{document}
%====== Vygenerování tabulky ======
%	\maketitle

\section{Zpracování měřených hodnot}	

\subsection{Náběh setrvačníku}

	\begin{figure*}[h!]
		\begin{tikzpicture}
			\centering
			\begin{axis}
				[
				xlabel={\( t\ [\unit{\second}]\)},
				ylabel={\( I\ [\unit{\ampere}]\)},
				%axis y line*=left, % dve y osy
				width=1\textwidth,
				height = 0.5\textwidth,
				legend pos=north east,
	%			xmin=0,
	%			ymin=0,
	%			xmax=100
	%			ymax=100
				]
	
				\addplot[mark=x, mark options={solid}, thick, blue, only marks, mark size=3pt] table [skip first n=1, x=t, y=I, col sep=comma] {data/1-rozbeh.csv};
				\addlegendentry{Setrvačník 1}
				
				\addplot[mark=+, mark options={solid}, thick, red, only marks, mark size=3pt] table [skip first n=1, x=t, y=I, col sep=comma] {data/2-rozbeh.csv};
				\addlegendentry{Setrvačník 2}

				\addplot[mark=o, mark options={solid}, thick, green, only marks, mark size=1pt] table [skip first n=1, x=t, y=I, col sep=comma] {data/3-rozbeh.csv};
				\addlegendentry{Setrvačník 3}

				\addplot[mark=Mercedes star, mark options={solid}, cyan, blue, only marks, mark size=3pt] table [skip first n=1, x=t, y=I, col sep=comma] {data/4-rozbeh.csv};
				\addlegendentry{Setrvačník 4}
				
			\end{axis}   
		 
			
		\end{tikzpicture}
		\caption{Závislost proudu setrvačníkem na čase.}
	\end{figure*}
	

	\begin{figure*}[h!]
		\begin{tikzpicture}
			\centering
			\begin{axis}
				[
				xlabel={\( t\ [\unit{\second}]\)},
				ylabel={\( P\ [\unit{\watt}]\)},
				%axis y line*=left, % dve y osy
				width=1\textwidth,
				height = 0.5\textwidth,
				legend pos=north east,
	%			xmin=0,
	%			ymin=0,
	%			xmax=100
	%			ymax=100
				]
	
				\addplot[mark=x, mark options={solid}, thick, blue, only marks, mark size=3pt] table [skip first n=1, x=t, y=P, col sep=comma] {data/1-rozbeh.csv};
				\addlegendentry{Setrvačník 1}
				
				\addplot[mark=+, mark options={solid}, thick, red, only marks, mark size=3pt] table [skip first n=1, x=t, y=P, col sep=comma] {data/2-rozbeh.csv};
				\addlegendentry{Setrvačník 2}

				\addplot[mark=o, mark options={solid}, thick, green, only marks, mark size=1pt] table [skip first n=1, x=t, y=P, col sep=comma] {data/3-rozbeh.csv};
				\addlegendentry{Setrvačník 3}

				\addplot[mark=Mercedes star, mark options={solid}, cyan, blue, only marks, mark size=3pt] table [skip first n=1, x=t, y=P, col sep=comma] {data/4-rozbeh.csv};
				\addlegendentry{Setrvačník 4}
				
			\end{axis}   
		 
			
		\end{tikzpicture}
		\caption{Závislost příkonu setrvačníku na čase. - asi zahodíme...}
	\end{figure*}

\clearpage
\subsection{Odpojení setrvačníku}

	\begin{figure*}[h!]
		\begin{tikzpicture}
			\centering
			\begin{axis}
				[
				xlabel={\( t\ [\unit{\second}]\)},
				ylabel={\( I\ [\unit{\ampere}]\)},
				%axis y line*=left, % dve y osy
				width=1\textwidth,
				height = 0.5\textwidth,
				legend pos=south east,
				xmin=-1,
	%			ymin=0,
				xmax=23
	%			ymax=100
				]

				\addplot[mark=x, mark options={solid}, thick, blue, only marks, mark size=3pt] table [skip first n=1, x=t, y=I, col sep=comma] {data/1-zastaveni.csv};
				\addlegendentry{Setrvačník 1}
				
				\addplot[mark=+, mark options={solid}, thick, red, only marks, mark size=3pt] table [skip first n=1, x=t, y=I, col sep=comma] {data/2-zastaveni.csv};
				\addlegendentry{Setrvačník 2}

				\addplot[mark=o, mark options={solid}, thick, green, only marks, mark size=1pt] table [skip first n=1, x=t, y=I, col sep=comma] {data/3-zastaveni.csv};
				\addlegendentry{Setrvačník 3}

				\addplot[mark=Mercedes star, mark options={solid}, cyan, blue, only marks, mark size=3pt] table [skip first n=1, x expr=\thisrow{t}-3, y=I, col sep=comma] {data/4-zastaveni.csv};
				\addlegendentry{Setrvačník 4}
				
			\end{axis}   
		
			
		\end{tikzpicture}
		\caption{Závislost proudu setrvačníkem na čase.}
	\end{figure*}


	\begin{figure*}[h!]
		\begin{tikzpicture}
			\centering
			\begin{axis}
				[
				xlabel={\( t\ [\unit{\second}]\)},
				ylabel={\( P\ [\unit{\watt}]\)},
				%axis y line*=left, % dve y osy
				width=1\textwidth,
				height = 0.5\textwidth,
				legend pos=north east,
				xmin=-1,
	%			ymin=0,
				xmax=18,
	%			ymax=100
				% ymode=log
				]

				\addplot[mark=x, mark options={solid}, thick, blue, only marks, mark size=3pt] table [skip first n=1, x=t, y=P, col sep=comma] {data/1-zastaveni.csv};
				\addlegendentry{Setrvačník 1}
				
				\addplot[mark=+, mark options={solid}, thick, red, only marks, mark size=3pt] table [skip first n=1, x=t, y=P, col sep=comma] {data/2-zastaveni.csv};
				\addlegendentry{Setrvačník 2}

				\addplot[mark=o, mark options={solid}, thick, green, only marks, mark size=1pt] table [skip first n=1, x=t, y=P, col sep=comma] {data/3-zastaveni.csv};
				\addlegendentry{Setrvačník 3}

				\addplot[mark=Mercedes star, mark options={solid}, cyan, blue, only marks, mark size=3pt] table [skip first n=1, x expr=\thisrow{t}-3, y=P, col sep=comma] {data/4-zastaveni.csv};
				\addlegendentry{Setrvačník 4}
				
			\end{axis}   
		
			
		\end{tikzpicture}
		\caption{Závislost výkonu setrvačníku na čase.}
	\end{figure*}

	\subsubsection{Akumulovaná energie a moment hybnosti, dodaná práce}
		Pro následující výpočty použijeme dle zadání zjednodušení a budeme počítat se Setrvačníky jakožto s plnými válci. Pak tedy moment setrvačnosti vypočteme takto:
		\[
			J = \frac{1}{2} m r^2 = \frac{1}{2} \cdot 9,3 \cdot \left(\frac{247\ [\unit{mm}]}{2\cdot 1000}\right)^2 = \qty{0,071}{\kilo\gram\meter\cubed}
		\]
		Následně vypočteme kinetickou energii:
		\[
			E_{k} = \frac{1}{2} J \omega^2 = \frac{1}{2} \cdot 0,071 \cdot (2\pi\cdot  10,63)^2 = \qty{158,2}{J}
		\]
		Pro výpočet práce dodané setrvačníkem je potřeba vypočítat plochu po křivkou závislosti výkonu na čase. Použijeme přibližnou obdélníkovou metodu:
		\[
			W= \int_{0}^{\infty} P \,dt \approx \sum_{i=1}^{n-1} \frac{(P_{i}+P_{i+1})\cdot (t_{i+1}-t_{i})}{2} \quad [\unit{\joule}]
		\]

		\begin{table}[h!]
		\centering
		\def\arraystretch{1.4}
		\begin{tabular}{|c|c|c|c|c|c|}
			\hline
			Číslo & m\ [\unit{\kilo\gram}] & d\ [mm] & J\ [\unit{\kilo\gram\meter\cubed}] & \(E_{k} \) \ [\unit{\joule}] & W \ [\unit{\joule}] \\\hline
			1 & 9,3 & 247& \num[round-mode=places,round-precision=3,exponent-mode = scientific]{0,0709229625} & \num[round-mode=places,round-precision=3]{158,2014191} & \num[round-mode=places,round-precision=3]{65,98079441} \\\hline
			2 & 8,25 & 254 & \num[round-mode=places,round-precision=3,exponent-mode = scientific]{0,066532125} & \num[round-mode=places,round-precision=3]{137,2776973} & \num[round-mode=places,round-precision=3]{55,6642251} \\\hline
			3 & 3,05 & 250 & \num[round-mode=places,round-precision=3,exponent-mode = scientific]{0,023828125} & \num[round-mode=places,round-precision=3]{51,4558242} & \num[round-mode=places,round-precision=3]{27,42331845} \\\hline
			4 & 3,055 & 165 & \num[round-mode=places,round-precision=3,exponent-mode = scientific]{0,01039654688} & \num[round-mode=places,round-precision=3]{23,18510778} & \num[round-mode=places,round-precision=3]{15,34950986} \\\hline
		\end{tabular}
		\caption{Moment setrvačnosti a teoretická i měřená akumulovaná energie.}
		\label{tab:osdifj}
	\end{table}


\section{Materiál setrvačníků}
	Pro výpočet objemu setrvečníku vycházíme z technických výkresů. Vždy počítám objem plného válce a následně odečtu oba výřezy ve tvaru komolého kužele a díry na šrouby a osu.
	\[
		\rho=\frac{m}{V}=\frac{9,3}{\num{9.823e-4}}= \qty{9467,3}{\kilo\gram\per\metre\cubed}
	\]


	\begin{table}[h!]
		\centering
		\def\arraystretch{1.4}
		\begin{tabular}{|c|c|c|c|c|c|}
			\hline
				Číslo & V\ [\unit{\meter\cubed}] & m\ [\unit{\kilo\gram}] & \(\rho\) \ [\unit{\kilo\gram\per\metre\cubed}]  & \(\rho_{tab} \) \ [\unit{\kilo\gram\per\metre\cubed}] & Materiál \\\hline
				1 & \num[round-mode=places,round-precision=3,exponent-mode = scientific]{0,0009823333495} & 9,3 &  \num[round-mode=places,round-precision=1]{9467,25468} & 8960 & slitina olova \\\hline
				2 & \num[round-mode=places,round-precision=3,exponent-mode = scientific]{0,001175693927} & 8,25 &  \num[round-mode=places,round-precision=1]{7017,132446} & 7870 & železo \\\hline
				3 & \num[round-mode=places,round-precision=3,exponent-mode = scientific]{0,00110726585} & 3,05 &  \num[round-mode=places,round-precision=1]{2754,532708} &  2700 & hliník \\\hline
				4 & \num[round-mode=places,round-precision=3,exponent-mode = scientific]{0,0004107662501} & 3,055 &  \num[round-mode=places,round-precision=1]{7437,319884} & 7870 & železo \\\hline
		\end{tabular}
		\caption{Objemy a materiál setrvačníků}
		\label{tab:osdifj}
	\end{table}
	

\clearpage
\section{Závěr}
	V této úloze jsme zkoumali možnosti akumulace energie do kinetocké energie rotujících těles -- setrvačníků. Na velikost akukulované energie má vliv moment setrvačnosti setrvačníku a frekvence jeho otáček. Frekvence byla pro všechny naše vzorky srovnatelná, tedy její vliv jsme neověřili, ale hodnoty námi měřené akumulované energie korespondují s vypočtenými momenty setrvačnosti. Stručně řečeno, klíčovou roli zde hraje hmotnost a průměr setrvačníku. 

	Absolutní čísla ani výpočet účinnosti zde nemá smysl uvádět, jelikož teoretická hodnota kinetické energie je zatížena chybou přibližně 25 \unit{\percent} z důvodu zjednodušení v zadání a měřená hodnota energie je zatížena ztrátami, zejména třením, jejich velikost se bude nejspíše měnit v závislosti na frekvenci, proto jejich vliv nelze snadno odečíst.  

	Z vypočtených objemů jsme také určili materiály jednotlivých setrvačníků, které jsou uvedeny v Tab. 2.
\end{document}